<!-- source: https://jenciso.github.io/blog/embedding-asciinema-cast-in-your-hugo-site/ -->
<!-- mildly adapated to add the controls option -->

<!-- NOTE: some options need to be passed bare on the shortcode, without "" -->

<div id='{{ with .Get "key" }}{{ . }}{{ end }}'></div>
<script src="{{ .Site.BaseURL }}/js/asciinema-player.min.js"></script>

{{ $src := .Page.Resources.GetMatch (printf "casts/%s*" (.Get "key")) }}

<script>
    AsciinemaPlayer.create('{{ $src.RelPermalink }}', document.getElementById('{{ with .Get "key" }}{{ . }}{{ end }}'), {
        {{ if .Get "controls" }}controls: {{ .Get "controls" }},{{ end }}
        {{ if .Get "cols" }}cols: "{{ .Get "cols" }}",{{ end }}
        {{ if .Get "rows" }}rows: "{{ .Get "rows" }}",{{ end }}
        {{ if .Get "autoPlay" }}autoPlay: "{{ .Get "autoPlay" }}",{{ end }}
        {{ if .Get "preload" }}preload: "{{ .Get "preload" }}",{{ end }}
        {{ if .Get "loop" }}loop: {{ .Get "loop" }},{{ end }}
        {{ if .Get "startAt" }}startAt: "{{ .Get "startAt" }}",{{ end }}
        {{ if .Get "speed" }}speed: "{{ .Get "speed" }}",{{ end }}
        {{ if .Get "idleTimeLimit" }}idleTimeLimit: "{{ .Get "idleTimeLimit" }}",{{ end }}
        {{ if .Get "theme" }}theme: "{{ .Get "theme" }}",{{ end }}
        {{ if .Get "poster" }}poster: "{{ .Get "poster" }}",{{ end }}
        {{ if .Get "fit" }}fit: "{{ .Get "fit" }}",{{ end }}
        {{ if .Get "terminalFontSize" }}terminalFontSize: "{{ .Get "terminalFontSize" }}",{{ end }}
        {{ if .Get "terminalFontFamily" }}terminalFontFamily: "{{ .Get "terminalFontFamily" }}",{{ end }}
        {{ if .Get "terminalLineHeight" }}terminalLineHeight: "{{ .Get "terminalLineHeight" }}",{{ end }}
     });
</script>